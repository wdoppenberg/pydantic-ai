interactions:
- request:
    headers:
      accept:
      - application/json
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '314'
      content-type:
      - application/json
      host:
      - api.anthropic.com
    method: POST
    parsed_body:
      max_tokens: 4096
      messages:
      - content:
        - text: what is 65465-6544 * 65464-6+1.02255
          type: text
        role: user
      model: claude-sonnet-4-0
      stream: true
      thinking:
        budget_tokens: 3000
        type: enabled
      tool_choice:
        type: auto
      tools:
      - name: code_execution
        type: code_execution_20250522
    uri: https://api.anthropic.com/v1/messages?beta=true
  response:
    body:
      string: |+
        event: message_start
        data: {"type":"message_start","message":{"id":"msg_01TaPV5KLA8MsCPDuJNKPLF4","type":"message","role":"assistant","model":"claude-sonnet-4-20250514","content":[],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":793,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":0},"output_tokens":8,"service_tier":"standard"}}              }

        event: content_block_start
        data: {"type":"content_block_start","index":0,"content_block":{"type":"thinking","thinking":"","signature":""}        }

        event: content_block_delta
        data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":"The user is asking me to calculate"}  }

        event: ping
        data: {"type": "ping"}

        event: content_block_delta
        data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" a mathematical expression: 65465-6544 *"} }

        event: content_block_delta
        data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" 65464-6+1.02255\n\nThis"}        }

        event: content_block_delta
        data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" involves multiplication and subtraction operations, and I need to be careful about the order of"}          }

        event: content_block_delta
        data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" operations (PEMDAS/BODMAS)."}          }

        event: content_block_delta
        data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" Let me break this down:\n\n65"}        }

        event: content_block_delta
        data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":"465-6544 * 65464-6+1.02255"}        }

        event: content_block_delta
        data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":"\n\nFollowing order of operations:\n1. First, multiplication:"}            }

        event: content_block_delta
        data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" 6544 * 65464"}           }

        event: content_block_delta
        data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":"\n2. Then left to right for"}          }

        event: content_block_delta
        data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" addition and subtraction: 65465"} }

        event: content_block_delta
        data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" - (result from step 1)"}            }

        event: content_block_delta
        data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" - 6 + 1.02255\n\nThis"}       }

        event: content_block_delta
        data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" is a computational task that requires precise"}  }

        event: content_block_delta
        data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" calculations, so I should use the code_execution"}   }

        event: content_block_delta
        data: {"type":"content_block_delta","index":0,"delta":{"type":"thinking_delta","thinking":" tool to get an accurate result."}               }

        event: content_block_delta
        data: {"type":"content_block_delta","index":0,"delta":{"type":"signature_delta","signature":"EucFCkYIBxgCKkCfcR3zTiKFcMLhP1aMZu4l0cfgiw3ukkSHOSX2qV1DEKtpe3pu1HpRvDz1mEw32e/wvHoS/AfpVYk3AFb8oAscEgxips//IwdGKRINkQoaDDc122APa5lQXEtsuiIw7RQW/ow7z+MOXL6D8pAl4Iz5V6VSbn2A37DxwRbzOYHSicZuvVrhZHLmn2WWwTZjKs4EYn4HNPF6+Y+9dITwGBWUz6WXsOnv/S1sp+WJLYD8vGMDG9DzTIdjQ9pMN/Bg6VB3hPTveXqxopBk+V7u1WaQC0NmkEmREv6Pdq9iHHEnuIhN0t7UrrNDxPwt/cmbilfa7QL8ofeeSorIRwvibXtG0aqNDu42r6JkatwttDSRIBSqIgKLkel8yPP9ksmOf4SRbNAbgijmq63s+EIkNHt2yjuTHV48pR1j1czHWcsoqJOHj6faeXge0OyGKuPqbBCzoqAjecNq0dRfHQUgXMWmeaJp1R6iWhKxyJV5Y2EwhA5WGH9xzc9h0TobIgGFGAk2OvzDPBO5qr+O85LbjNeHF3WfZciaj2lMIVsveklN9S8598m+R+D4/O8Sscebc2xoVf8qBDazJP5gVtuMoAKBcJuNVWeTR5snv2vs5BEejv6Q2gcb6rPa4ZxEmilhK1NTy9+dwoYvgLUm5o11PBXbI7uRv18tLwwer55Ult5Aq3JgG8Uj8FgBA4exLCw9LKUhzd+1lN0i19f2mDDuBORw5dPUBj2unzIb6sro/2SYm3MF2nmKhh5mm1F/v37ksOzJlTUPhbcs6aYrUJo5cM1H9AB8vpcNln38uWb4tuFgD5Wqy/0WFu60nsRsnInI5SPMN39wA4cx2eyrCfne32iw0Ov+VAdn0+D8FFzyVEEh7lrCQlJFoqoznxvpKh6NRhUzLmLpfEPOhFN/bZBHsj+3YJLT4JgRaYGTf6fMkZGCyIk60hIbqofwcuMFNqFYOK0nffOV8dz9ElisN/6cSJsYAQ=="}     }

        event: content_block_stop
        data: {"type":"content_block_stop","index":0            }

        event: content_block_start
        data: {"type":"content_block_start","index":1,"content_block":{"type":"text","text":""}               }

        event: content_block_delta
        data: {"type":"content_block_delta","index":1,"delta":{"type":"text_delta","text":"I'll calculate this mathematical expression for you. Let me break"}  }

        event: content_block_delta
        data: {"type":"content_block_delta","index":1,"delta":{"type":"text_delta","text":" it down step by step following the order of operations."}              }

        event: content_block_stop
        data: {"type":"content_block_stop","index":1   }

        event: content_block_start
        data: {"type":"content_block_start","index":2,"content_block":{"type":"server_tool_use","id":"srvtoolu_01MKwyo39KHRDr9Ubff5vWtG","name":"code_execution","input":{}}}

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":""}}

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"{\"code\": \"# Calculate the expression: 65465-6544 * 65464-6+1.02255\\n# Following order of operations (PEMDAS/BODMAS"}      }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":")\\n\\nexpression = \\\"65465-6544 "} }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"* 65464-6+1"}     }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":".02255\\\"\\nprint(f\\\"Expression: {expression"}   }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"}\\\")\\n\\n# Let's break it down"}        }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":" step by step\\nstep1 = "}          }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"6544 * 65464  "}      }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"# Multiplication first\\nprint"}       }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"(f\\\"Step 1 "}         }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"- Multiplication: "}     }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"6544 * 65464 "}         }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"= {step1}\\\")\\n\\nstep2"} }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":" = 65465 - step1  "}}

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"# First subtraction\\nprint(f\\\"Step"}          }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":" 2 - First subtraction:"}     }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":" 65465 - {step1"}            }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"} = {step2}\\\")\\n\\nstep"}        }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"3 = step2 - 6  # Second subtraction\\nprint"}      }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"(f\\\"Step 3 - Second subtraction: {step2}"}           }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":" - 6 = {step3"}             }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"}\\\")\\n\\nfinal_result = step3 + "}               }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"1.02255  # Final addition\\nprint(f\\\"Step "}          }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"4 - Final addition: {step3"}     }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"} + 1.02255 "}              }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"= {final_result}\\\")\\n\\n#"}      }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":" Let's also verify with"}          }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":" direct calculation\\ndirect_result = 65"}          }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"465-6544 * 65464-"}            }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"6+1.02255\\nprint(f\\\"\\\\nDirect calculation:"}     }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":" {direct_result}\\\")\\nprint"}              }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"(f\\\"Results match: {final_result == direct"}           }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"_result}\\\")"}         }

        event: content_block_delta
        data: {"type":"content_block_delta","index":2,"delta":{"type":"input_json_delta","partial_json":"\"}"}            }

        event: content_block_stop
        data: {"type":"content_block_stop","index":2   }

        event: content_block_start
        data: {"type":"content_block_start","index":3,"content_block":{"type":"code_execution_tool_result","tool_use_id":"srvtoolu_01MKwyo39KHRDr9Ubff5vWtG","content":{"type":"code_execution_result","stdout":"Expression: 65465-6544 * 65464-6+1.02255\nStep 1 - Multiplication: 6544 * 65464 = 428396416\nStep 2 - First subtraction: 65465 - 428396416 = -428330951\nStep 3 - Second subtraction: -428330951 - 6 = -428330957\nStep 4 - Final addition: -428330957 + 1.02255 = -428330955.97745\n\nDirect calculation: -428330955.97745\nResults match: True\n","stderr":"","return_code":0,"content":[]}}          }

        event: content_block_stop
        data: {"type":"content_block_stop","index":3            }

        event: content_block_start
        data: {"type":"content_block_start","index":4,"content_block":{"type":"text","text":""}            }

        event: content_block_delta
        data: {"type":"content_block_delta","index":4,"delta":{"type":"text_delta","text":"The answer to"}          }

        event: content_block_delta
        data: {"type":"content_block_delta","index":4,"delta":{"type":"text_delta","text":" **65465-6544 * "}      }

        event: content_block_delta
        data: {"type":"content_block_delta","index":4,"delta":{"type":"text_delta","text":"65464-6+1.02255** is **"}     }

        event: content_block_delta
        data: {"type":"content_block_delta","index":4,"delta":{"type":"text_delta","text":"-428,330,955.97745**."}             }

        event: content_block_delta
        data: {"type":"content_block_delta","index":4,"delta":{"type":"text_delta","text":"\n\nHere's how it breaks down following the order of operations:\n1. First"}           }

        event: content_block_delta
        data: {"type":"content_block_delta","index":4,"delta":{"type":"text_delta","text":", multiplication: 6,544 Ã— 65,464 "}             }

        event: content_block_delta
        data: {"type":"content_block_delta","index":4,"delta":{"type":"text_delta","text":"= 428,396,416\n2. Then left"}   }

        event: content_block_delta
        data: {"type":"content_block_delta","index":4,"delta":{"type":"text_delta","text":" to right: 65,465 - 428"}             }

        event: content_block_delta
        data: {"type":"content_block_delta","index":4,"delta":{"type":"text_delta","text":",396,416 = -428,330,951\n3"}         }

        event: content_block_delta
        data: {"type":"content_block_delta","index":4,"delta":{"type":"text_delta","text":". Continue: -428,330,951 -"}               }

        event: content_block_delta
        data: {"type":"content_block_delta","index":4,"delta":{"type":"text_delta","text":" 6 = -428,330"}             }

        event: content_block_delta
        data: {"type":"content_block_delta","index":4,"delta":{"type":"text_delta","text":",957\n4. Finally: -428,330,957 + "}               }

        event: content_block_delta
        data: {"type":"content_block_delta","index":4,"delta":{"type":"text_delta","text":"1.02255 = -428,330,955.97745"}              }

        event: content_block_stop
        data: {"type":"content_block_stop","index":4   }

        event: message_delta
        data: {"type":"message_delta","delta":{"stop_reason":"end_turn","stop_sequence":null,"container":{"id":"container_011CTCwoJjSVr9b94gf8DPEi","expires_at":"2025-09-17T00:27:12.723045Z"}},"usage":{"input_tokens":2316,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"output_tokens":733,"server_tool_use":{"web_search_requests":0,"web_fetch_requests":0}}         }

        event: message_stop
        data: {"type":"message_stop"}

    headers:
      cache-control:
      - no-cache
      connection:
      - keep-alive
      content-type:
      - text/event-stream; charset=utf-8
      strict-transport-security:
      - max-age=31536000; includeSubDomains; preload
      transfer-encoding:
      - chunked
    status:
      code: 200
      message: OK
version: 1
...
